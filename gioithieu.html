<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giới Thiệu - Nhà Hàng Ẩm Thực Phương Nam</title> <!-- Changed Title -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #e53e3e; --secondary-color: #f6ad55; --accent-color: #718096; --text-color: #2d3748; --light-color: #f7fafc; }
        body { font-family: 'Roboto', sans-serif; color: var(--text-color); overflow-x: hidden; }
        .font-cursive { font-family: 'Dancing Script', cursive; }
        .bg-primary { background-color: var(--primary-color); }
        .text-primary { color: var(--primary-color); }
        .bg-secondary { background-color: var(--secondary-color); }
        .text-secondary { color: var(--secondary-color); }
        .menu-item:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .banner { background-image: url('https://cdn.jsdelivr.net/gh/codediodeio/code-snippets/nba-trader/wood.jpg'); background-size: cover; background-position: center; position: relative; }
        .banner::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); }
        .chatbot-container { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .chatbot-button { width: 60px; height: 60px; border-radius: 50%; background-color: var(--primary-color); display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .chatbot-panel { display: none; width: 350px; height: 450px; background-color: white; border-radius: 10px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); overflow: hidden; position: absolute; bottom: 70px; right: 0; }
        .chatbot-header { padding: 15px; background-color: var(--primary-color); color: white; }
        .chatbot-messages { height: 330px; padding: 15px; overflow-y: auto; }
        .chatbot-input { display: flex; padding: 10px; border-top: 1px solid #e2e8f0; }
        @media (max-width: 768px) { .chatbot-panel { width: 300px; right: -10px; } }
        .ad-banner { background-color: #feebc8; overflow: hidden; position: relative; }
        .scroll-container { display: flex; animation: scroll 20s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 2000; justify-content: center; align-items: center; }
        .modal.active { display: flex; }
        .nav-link { position: relative; padding-bottom: 5px; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--primary-color); transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        main > section { display: block !important; }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-2">
             <div class="flex justify-between items-center">
                 <div class="flex items-center">
                      <a href="index.html" class="flex items-center text-decoration-none">
                         <div class="text-2xl font-bold text-primary mr-2">
                             <span class="font-cursive">Phương Nam</span>
                         </div>
                         <div class="text-sm text-gray-700">
                             <div>Ẩm Thực</div>
                         </div>
                      </a>
                 </div>
                 <!-- Desktop Navigation -->
                 <nav class="hidden md:flex space-x-8">
                    <a href="Index.html" class="nav-link active" data-target="home">Trang Chủ</a>
                    <a href="gioithieu.html" class="nav-link" data-target="about">Giới Thiệu</a>
                    <a href="Menu.html" class="nav-link" data-target="menu">Thực Đơn</a>
                    <a href="lienhe&datban.html" class="nav-link" data-target="reservation">Đặt Bàn & Liên Hệ</a>
                </nav>
                
                <div class="flex items-center">
                    <button id="loginBtn" class="hidden md:block bg-white text-primary px-4 py-2 rounded-lg border border-primary hover:bg-primary hover:text-white transition duration-300 mr-3">
                        Đăng Nhập
                    </button>
                    <button id="cartBtn" class="relative">
                        <i class="fas fa-shopping-cart text-gray-600 text-xl"></i>
                        <span class="absolute -top-2 -right-2 bg-primary text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">0</span>
                    </button>
                    <button id="menuToggle" class="md:hidden ml-4 focus:outline-none">
                        <i class="fas fa-bars text-2xl text-gray-600"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <nav id="mobileNav" class="md:hidden hidden mt-4 pb-4">
                <div class="flex flex-col space-y-3">
                    <a href="Index.htmhtm" class="mobile-nav-link py-2 px-4 rounded hover:bg-gray-100" data-target="home">Trang Chủ</a>
                    <a href="gioithieu.html" class="mobile-nav-link py-2 px-4 rounded hover:bg-gray-100" data-target="about">Giới Thiệu</a>
                    <a href="Menu.html" class="mobile-nav-link py-2 px-4 rounded hover:bg-gray-100" data-target="menu">Thực Đơn</a>
                    <a href="lienhe&datban.html" class="mobile-nav-link py-2 px-4 rounded hover:bg-gray-100" data-target="reservation">Đặt Bàn & Liên Hệ</a>
                    <button id="mobileLoginBtn" class="text-left py-2 px-4 rounded hover:bg-gray-100">Đăng Nhập</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Ad Banner -->
    <div class="ad-banner py-2">
       <div class="scroll-container">
           <div class="flex space-x-8 items-center px-4">
                <span class="text-orange-700 font-semibold whitespace-nowrap">⭐ Khuyến mãi đặc biệt: Giảm 20% cho nhóm từ 4 người trở lên vào các ngày thứ 3-5 hàng tuần</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">🔥 Món mới: Cơm cháy sườn rim mật ong - Hương vị độc đáo chỉ có tại Phương Nam</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">🎁 Đặt bàn online - Tặng ngay món khai vị</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">📱 Tải app - Tích điểm thưởng và nhận ưu đãi độc quyền</span>
           </div>
           <div class="flex space-x-8 items-center px-4">
                <span class="text-orange-700 font-semibold whitespace-nowrap">⭐ Khuyến mãi đặc biệt: Giảm 20% cho nhóm từ 4 người trở lên vào các ngày thứ 3-5 hàng tuần</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">🔥 Món mới: Cơm cháy sườn rim mật ong - Hương vị độc đáo chỉ có tại Phương Nam</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">🎁 Đặt bàn online - Tặng ngay món khai vị</span>
                <span class="text-orange-700 font-semibold whitespace-nowrap">📱 Tải app - Tích điểm thưởng và nhận ưu đãi độc quyền</span>
           </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- About Section Content -->
        <section class="py-12 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold mb-2">Giới Thiệu</h2>
                    <p class="text-gray-600">Câu chuyện về Nhà hàng Ẩm thực Phương Nam</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mb-16 bg-gray-50 p-8 rounded-lg">
                    <div class="bg-gray-300 h-80 md:h-96 rounded-lg flex items-center justify-center overflow-hidden">
                        <img src="img/gioithieu3.jpg" alt="Nhà hàng Phương Nam" class="w-full h-full object-cover">
                    </div>
                    
                    <div>
                        <h3 class="text-2xl font-bold mb-4">Hành Trình Của Chúng Tôi</h3>
                        <p class="text-gray-600 mb-4">Nhà hàng Ẩm thực Phương Nam được thành lập vào năm 2010 với mong muốn mang đến cho thực khách những trải nghiệm ẩm thực Nam Bộ đích thực nhất.</p>
                        <p class="text-gray-600 mb-4">Từ một quán nhỏ với vài món đặc sản, chúng tôi đã dần phát triển và trở thành điểm đến quen thuộc cho những ai yêu thích ẩm thực miền Nam, đặc biệt là các món ăn dân dã, đậm đà hương vị quê hương.</p>
                        <p class="text-gray-600">Đến nay, Phương Nam tự hào là một trong những nhà hàng hàng đầu về ẩm thực Nam Bộ, nơi không chỉ mang đến những món ăn ngon mà còn là nơi lưu giữ và phát huy những giá trị văn hóa ẩm thực truyền thống của vùng đất phương Nam trù phú.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mb-16 bg-red-50 p-8 rounded-lg">
                    
                    <div class="order-2 md:order-1">
                        <h3 class="text-2xl font-bold mb-4">Triết Lý Ẩm Thực</h3>
                        <p class="text-gray-600 mb-4">Tại Phương Nam, chúng tôi tin rằng ẩm thực không chỉ đơn thuần là việc thưởng thức món ăn, mà còn là cách để kết nối con người với nhau và với văn hóa bản địa.</p>
                        <p class="text-gray-600 mb-4">Mỗi món ăn tại Phương Nam đều được chế biến cẩn thận từ những nguyên liệu tươi ngon nhất, theo công thức truyền thống được giữ gìn và phát triển qua nhiều thế hệ.</p>
                        <p class="text-gray-600">Chúng tôi tôn trọng bản sắc của từng món ăn, đồng thời không ngừng sáng tạo để mang đến những trải nghiệm ẩm thực mới mẻ nhưng vẫn giữ được hồn cốt của ẩm thực Nam Bộ.</p>
                    </div>
                    <div class="order-1 md:order-2 bg-gray-300 h-80 md:h-96 rounded-lg flex items-center justify-center">
                        <img src="img/hinhtruyenthong2.jpg" alt="Nhà hàng Phương Nam" class="w-full h-full object-cover">
                    </div>
                </div>

                <div class="text-center mb-12 bg-yellow-50 p-8 rounded-lg">
                    <h3 class="text-2xl font-bold mb-4">Đội Ngũ Của Chúng Tôi</h3>
                    <p class="text-gray-600 mb-8">Đằng sau mỗi món ăn ngon là những con người tài năng và đam mê</p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    <!-- Chef 1 -->
                    <!-- Chef 1 -->
<div class="bg-white rounded-lg overflow-hidden shadow-md text-center">
    <div class="h-64 overflow-hidden">
        <img src="img/N. Truong.jpg" alt="Nguyễn Minh Đạt" class="w-full h-full object-cover">
    </div>
    <div class="p-6">
        <h4 class="font-bold text-xl mb-1">Nguyễn Nhật Trường</h4>
        <p class="text-primary mb-2">Bếp Trưởng</p>
        <p class="text-gray-600">Với hơn 20 năm kinh nghiệm trong ẩm thực Nam Bộ, Chef Đạt là linh hồn của nhà hàng Phương Nam.</p>
    </div>
</div>

<!-- Chef 2 -->
<div class="bg-white rounded-lg overflow-hidden shadow-md text-center">
    <div class="h-64 overflow-hidden">
        <img src="img/K.Thuat.jpg" alt="Trần Thị Ngọc Ánh" class="w-full h-full object-cover">
    </div>
    <div class="p-6">
        <h4 class="font-bold text-xl mb-1">Nguyễn Huỳnh Kỹ Thuật</h4>
        <p class="text-primary mb-2">Bếp Phó</p>
        <p class="text-gray-600">Chuyên gia về các món canh và lẩu, mang đến hương vị đặc trưng cho Phương Nam.</p>
    </div>
</div>

<!-- Chef 3 -->
<div class="bg-white rounded-lg overflow-hidden shadow-md text-center">
    <div class="h-64 overflow-hidden">
        <img src="img/T.VY.jpg" alt="Lê Hoàng Nam" class="w-full h-full object-cover">
    </div>
    <div class="p-6">
        <h4 class="font-bold text-xl mb-1">Hứa Thị Thảo Vy</h4>
        <p class="text-primary mb-2">Đầu Bếp Món Nướng</p>
        <p class="text-gray-600">Bậc thầy về các món nướng, đặc biệt là cá lóc nướng trui và các món nướng miền Tây.</p>
    </div>
</div>

<!-- Chef 4 -->
<div class="bg-white rounded-lg overflow-hidden shadow-md text-center">
    <div class="h-64 overflow-hidden">
        <img src="img/t. vu.jpg" alt="Phạm Thị Hồng" class="w-full h-full object-cover">
    </div>
    <div class="p-6">
        <h4 class="font-bold text-xl mb-1">Đỗ Thiên Vũ</h4>
        <p class="text-primary mb-2">Chuyên Gia Món Chay</p>
        <p class="text-gray-600">Người sáng tạo ra nhiều món chay độc đáo mang hương vị đặc trưng phương Nam.</p>
    </div>
</div>

                </div>

                <!-- Restaurant Photos -->
                <div class="text-center mb-12 bg-green-50 p-8 rounded-lg">
                    <h3 class="text-2xl font-bold mb-4">Không Gian Nhà Hàng</h3>
                    <p class="text-gray-600 mb-8">Khung cảnh ấm cúng và sang trọng tại Phương Nam</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 bg-blue-50 p-8 rounded-lg">
                   <!-- Không gian chung -->
<div class="h-64 rounded-lg overflow-hidden shadow-md">
    <img src="img/Alo.jpg" alt="Không gian nhà hàng" class="w-full h-full object-cover">
</div>

<!-- Khu vực VIP -->
<div class="h-64 rounded-lg overflow-hidden shadow-md">
    <img src="img/alo2.jpg" alt="Khu vực VIP" class="w-full h-full object-cover">
</div>

<!-- Sân vườn -->
<div class="h-64 rounded-lg overflow-hidden shadow-md">
    <img src="img/alo3.jpg" alt="Sân vườn" class="w-full h-full object-cover">
</div>

                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-12 pb-6">
        <div class="container mx-auto px-4">
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                  <div>
                     <h3 class="text-2xl font-cursive mb-4">Phương Nam</h3>
                     <p class="mb-4">Nhà hàng Ẩm thực Phương Nam mang đến trải nghiệm ẩm thực Nam Bộ đích thực với không gian sang trọng và ấm cúng.</p>
                     <div class="flex space-x-4">
                         <a href="#" class="text-white hover:text-primary transition duration-300"><i class="fab fa-facebook-f"></i></a>
                         <a href="#" class="text-white hover:text-primary transition duration-300"><i class="fab fa-instagram"></i></a>
                         <a href="#" class="text-white hover:text-primary transition duration-300"><i class="fab fa-youtube"></i></a>
                         <a href="#" class="text-white hover:text-primary transition duration-300"><i class="fab fa-tiktok"></i></a>
                     </div>
                 </div>
                 <div>
                     <h4 class="text-lg font-bold mb-4">Liên Kết Nhanh</h4>
                     <ul class="space-y-2">
                         <li><a href="index.html" class="hover:text-primary transition duration-300" data-page="index">Trang Chủ</a></li>
                         <li><a href="about.html" class="hover:text-primary transition duration-300" data-page="about">Giới Thiệu</a></li>
                         <li><a href="menu.html" class="hover:text-primary transition duration-300" data-page="menu">Thực Đơn</a></li>
                         <li><a href="reservation.html" class="hover:text-primary transition duration-300" data-page="reservation">Đặt Bàn</a></li>
                         <li><a href="#" class="hover:text-primary transition duration-300">Blog</a></li>
                         <li><a href="#" class="hover:text-primary transition duration-300">Tuyển Dụng</a></li>
                     </ul>
                 </div>
                  <div>
                     <h4 class="text-lg font-bold mb-4">Thông Tin Liên Hệ</h4>
                     <ul class="space-y-2">
                         <li class="flex items-start"><i class="fas fa-map-marker-alt mr-3 mt-1"></i><span>123 Nguyễn Văn Linh, Quận 7, TP. Hồ Chí Minh</span></li>
                         <li class="flex items-start"><i class="fas fa-phone-alt mr-3 mt-1"></i><span>028 1234 5678</span></li>
                         <li class="flex items-start"><i class="fas fa-envelope mr-3 mt-1"></i><span><a href="/cdn-cgi/l/email-protection#6e070008012e1e061b010009000f03400d0103" class="hover:text-primary transition duration-300 __cf_email__">[email protected]</a></span></li>
                     </ul>
                 </div>
                 <div>
                     <h4 class="text-lg font-bold mb-4">Đăng Ký Nhận Tin</h4>
                     <p class="mb-4">Đăng ký để nhận thông tin về ưu đãi đặc biệt và sự kiện mới nhất.</p>
                     <form>
                         <div class="flex">
                             <input type="email" placeholder="Email của bạn" class="px-4 py-2 rounded-l-lg w-full focus:outline-none text-gray-800">
                             <button type="submit" class="bg-primary hover:bg-red-700 px-4 py-2 rounded-r-lg transition duration-300"><i class="fas fa-paper-plane"></i></button>
                         </div>
                     </form>
                 </div>
             </div>
             <hr class="border-gray-700 mb-6">
             <div class="text-center text-gray-400">
                 <p>© 2023 Nhà Hàng Ẩm Thực Phương Nam. All rights reserved.</p>
             </div>
         </div>
    </footer>

    <div class="fixed bottom-6 right-6 z-50">
        <!-- nút kích hoạt -->
        <button id="chatbotButton"
          class="w-16 h-16 bg-gradient-to-br from-green-400 to-blue-500 rounded-full shadow-2xl flex items-center justify-center text-white text-3xl hover:scale-110 transition-transform duration-300">
          <i class="fas fa-robot animate-bounce"></i>
        </button>
        <!-- panel chat -->
        <div id="chatbotPanel"
          class="mt-4 w-80 bg-white rounded-2xl shadow-2xl overflow-hidden transform translate-y-8 opacity-0 pointer-events-none transition-all duration-300">
          <!-- header -->
          <div class="bg-gradient-to-r from-green-500 to-blue-600 p-4 flex items-center justify-between">
            <div class="flex items-center">
              <i class="fas fa-robot text-2xl text-white mr-2"></i>
              <div>
                <h3 class="text-white font-bold">Phương Nam Bot</h3>
                <p class="text-gray-200 text-xs">Trực tuyến 24/7</p>
              </div>
            </div>
            <button id="closeChatbot" class="text-white text-xl hover:text-gray-200 transition-colors">
              &times;
            </button>
          </div>
          <!-- messages -->
          <div id="chatbotMessages" class="p-4 space-y-3 max-h-64 overflow-y-auto bg-gray-50">
            <!-- tin nhắn chào mừng -->
            <div class="flex">
              <div class="bg-white p-3 rounded-2xl shadow-md inline-block max-w-[80%]">
                <p>Xin chào! Tôi là trợ lý ảo Nhà hàng Phương Nam. Mình giúp gì cho bạn?</p>
              </div>
            </div>
            <!-- gợi ý -->
            <div id="suggestionBox" class="flex justify-start">
              <div
                class="bg-yellow-100 text-yellow-800 px-3 py-2 rounded-full cursor-pointer hover:bg-yellow-200 transition-colors">
                Hôm nay bạn muốn ăn gì?
              </div>
            </div>
          </div>
          <!-- input -->
          <div class="p-4 bg-white border-t">
            <div class="flex items-end space-x-2">
              <textarea id="chatbotInput"
                class="flex-1 h-8 resize-none border border-gray-300 rounded-2xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200"
                placeholder="Gõ tin nhắn..." rows="1"></textarea>
              <button id="sendMessage"
                class="w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white hover:scale-110 transition-transform duration-200">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 2. JS -->
      <script>
        const btnOpen      = document.getElementById('chatbotButton');
        const btnClose     = document.getElementById('closeChatbot');
        const panel        = document.getElementById('chatbotPanel');
        const messages     = document.getElementById('chatbotMessages');
        const suggestion   = document.getElementById('suggestionBox').firstElementChild;
        const inputField   = document.getElementById('chatbotInput');
      
        function togglePanel() {
          panel.classList.toggle('translate-y-8');
          panel.classList.toggle('opacity-0');
          panel.classList.toggle('pointer-events-none');
        }
      
        // Mở/đóng panel
        btnOpen.addEventListener('click', togglePanel);
        btnClose.addEventListener('click', togglePanel);
      
        // Khi click gợi ý, auto fill và gửi
        suggestion.addEventListener('click', () => {
          const text = suggestion.textContent.trim();
          inputField.value = text;
          // Có thể tự call Hàm gửi nếu cần, ví dụ:
          // sendUserMessage(text);
        });
      </script>
      

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="bg-white rounded-lg overflow-hidden shadow-xl w-full max-w-md">
             <div class="p-6">
                 <div class="flex justify-between items-center mb-6">
                     <h3 class="text-2xl font-bold">Đăng Nhập</h3>
                     <button id="closeLoginModal" class="text-gray-400 hover:text-gray-500"><i class="fas fa-times"></i></button>
                 </div>
                 <div class="tabs mb-6">
                     <div class="flex border-b">
                         <button id="loginTab" class="py-2 px-4 text-primary border-b-2 border-primary">Đăng Nhập</button>
                         <button id="registerTab" class="py-2 px-4 text-gray-500">Đăng Ký</button>
                     </div>
                 </div>
                 <form id="loginForm" class="tab-content">
                      <div class="mb-4"><label for="loginEmail" class="block text-gray-700 mb-2">Email</label><input type="email" id="loginEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="example@email.com" required></div>
                     <div class="mb-6"><label for="loginPassword" class="block text-gray-700 mb-2">Mật khẩu</label><input type="password" id="loginPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="flex items-center justify-between mb-6"><div class="flex items-center"><input type="checkbox" id="remember" class="mr-2"><label for="remember" class="text-gray-700">Ghi nhớ đăng nhập</label></div><a href="#" class="text-primary hover:underline">Quên mật khẩu?</a></div>
                     <button type="submit" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300">Đăng Nhập</button>
                 </form>
                 <form id="registerForm" class="tab-content hidden">
                     <div class="mb-4"><label for="registerName" class="block text-gray-700 mb-2">Họ và tên</label><input type="text" id="registerName" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="mb-4"><label for="registerEmail" class="block text-gray-700 mb-2">Email</label><input type="email" id="registerEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="mb-4"><label for="registerPhone" class="block text-gray-700 mb-2">Số điện thoại</label><input type="tel" id="registerPhone" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="mb-4"><label for="registerPassword" class="block text-gray-700 mb-2">Mật khẩu</label><input type="password" id="registerPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="mb-6"><label for="confirmPassword" class="block text-gray-700 mb-2">Xác nhận mật khẩu</label><input type="password" id="confirmPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></div>
                     <div class="mb-6"><input type="checkbox" id="terms" class="mr-2" required><label for="terms" class="text-gray-700">Tôi đồng ý với <a href="#" class="text-primary hover:underline">Điều khoản dịch vụ</a></label></div>
                     <button type="submit" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300">Đăng Ký</button>
                 </form>
                 <div class="mt-6 text-center">
                     <p class="text-gray-600">Hoặc đăng nhập với</p>
                     <div class="flex justify-center space-x-4 mt-4">
                         <button class="flex items-center justify-center w-12 h-12 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition duration-300"><i class="fab fa-facebook-f"></i></button>
                         <button class="flex items-center justify-center w-12 h-12 rounded-full bg-red-500 text-white hover:bg-red-600 transition duration-300"><i class="fab fa-google"></i></button>
                         <button class="flex items-center justify-center w-12 h-12 rounded-full bg-sky-500 text-white hover:bg-sky-600 transition duration-300"><i class="fab fa-twitter"></i></button>
                     </div>
                 </div>
             </div>
         </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script>
        
       
        const GROQ_API_KEY = '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'; 
        const GROQ_API_URL = 'https://api.groq.com/openai/v1/chat/completions'; 
        const GROQ_MODEL_NAME = 'meta-llama/llama-4-maverick-17b-128e-instruct'; 
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menuToggle');
            const mobileNav = document.getElementById('mobileNav');
            if (menuToggle && mobileNav) {
                menuToggle.addEventListener('click', () => mobileNav.classList.toggle('hidden'));
            }

            const loginBtn = document.getElementById('loginBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const loginModal = document.getElementById('loginModal');
            const closeLoginModal = document.getElementById('closeLoginModal');
            if (loginBtn && mobileLoginBtn && loginModal && closeLoginModal) {
                loginBtn.addEventListener('click', () => loginModal.classList.add('active'));
                mobileLoginBtn.addEventListener('click', () => { loginModal.classList.add('active'); if (mobileNav) mobileNav.classList.add('hidden'); });
                closeLoginModal.addEventListener('click', () => loginModal.classList.remove('active'));
                loginModal.addEventListener('click', (e) => { if (e.target === loginModal) loginModal.classList.remove('active'); });

                const loginTab = document.getElementById('loginTab');
                const registerTab = document.getElementById('registerTab');
                const loginForm = document.getElementById('loginForm');
                const registerForm = document.getElementById('registerForm');
                if (loginTab && registerTab && loginForm && registerForm) {
                    loginTab.addEventListener('click', () => {
                        loginTab.classList.add('text-primary', 'border-primary', 'border-b-2');
                        registerTab.classList.remove('text-primary', 'border-primary', 'border-b-2');
                        registerTab.classList.add('text-gray-500');
                        loginForm.classList.remove('hidden');
                        registerForm.classList.add('hidden');
                    });
                    registerTab.addEventListener('click', () => {
                        registerTab.classList.add('text-primary', 'border-primary', 'border-b-2');
                        loginTab.classList.remove('text-primary', 'border-primary', 'border-b-2');
                        loginTab.classList.add('text-gray-500');
                        registerForm.classList.remove('hidden');
                        loginForm.classList.add('hidden');
                    });
                }

                if (loginForm) { loginForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Đăng nhập thành công!'); loginModal.classList.remove('active'); }); }
                if (registerForm) { registerForm.addEventListener('submit', (e) => { e.preventDefault(); /* Add pw check if needed */ alert('Đăng ký thành công!'); loginModal.classList.remove('active'); }); }
            }

            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            const cartCounter = document.querySelector('#cartBtn span');
            let cartCount = 0; // Consider using localStorage for persistence
            if (cartCounter) { cartCounter.textContent = cartCount; }
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    cartCount++; if (cartCounter) { cartCounter.textContent = cartCount; } const menuItem = this.closest('.menu-item'); const itemName = menuItem?.querySelector('h3')?.textContent || 'Sản phẩm'; const notification = document.createElement('div'); notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50'; notification.textContent = `Đã thêm ${itemName} vào giỏ hàng!`; document.body.appendChild(notification); setTimeout(() => { notification.remove(); }, 3000);
                });
            });

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const pageName = currentPage.replace('.html', '').toLowerCase(); 
            const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
            navLinks.forEach(link => {
                const linkHref = link.getAttribute('href');
                const linkPage = linkHref ? linkHref.split('/').pop().replace('.html', '').toLowerCase() : '';
                const isIndex = (pageName === 'index' || pageName === ''); 
                const linkIsIndex = (linkPage === 'index' || linkPage === '');

                if ((isIndex && linkIsIndex) || (pageName !== '' && pageName !== 'index' && pageName === linkPage)) {
                    link.classList.add('active');
                     if(link.classList.contains('mobile-nav-link')) {
                         link.classList.add('bg-gray-200', 'font-semibold');
                     }
                } else {
                    link.classList.remove('active');
                    if(link.classList.contains('mobile-nav-link')) {
                         link.classList.remove('bg-gray-200', 'font-semibold');
                    }
                }
            });

            const chatbotInput = document.getElementById('chatbotInput');
            if (chatbotInput) {
                 chatbotInput.addEventListener('input', autoResizeTextarea);
                 // Also resize initially if there's any default text
                 autoResizeTextarea.call(chatbotInput);
            }

            function autoResizeTextarea() {
                this.style.height = 'auto'; 
                this.style.height = (this.scrollHeight) + 'px';
            }


           
            const chatbotButton = document.getElementById('chatbotButton');
            const chatbotPanel = document.getElementById('chatbotPanel');
            const closeChatbot = document.getElementById('closeChatbot');
            // chatbotInput is already defined above
            const sendMessage = document.getElementById('sendMessage');
            const chatbotMessages = document.getElementById('chatbotMessages');

            // Chat history for API (Groq expects { role: 'user'/'assistant', content: '...' })
            let chatHistory = [];

            let currentBotMessageElement = null; // To update streaming message
            let currentBotFullText = ''; // Accumulates text for the current streaming message


            if (chatbotButton && chatbotPanel && closeChatbot && chatbotInput && sendMessage && chatbotMessages) {
                 // Initial bot message handler (already in HTML, just ensure history matches if needed)
                 // For simplicity, we'll let the first message be hardcoded in HTML and start history after that.
                 // If you wanted the first message to also come from the bot via API, you'd call handleSendMessage with a greeting prompt on load.

                chatbotButton.addEventListener('click', () => {
                    chatbotPanel.style.display = chatbotPanel.style.display === 'block' ? 'none' : 'block';
                    if (chatbotPanel.style.display === 'block') {
                         chatbotMessages.scrollTop = chatbotMessages.scrollHeight; // Scroll down when opened
                         chatbotInput.focus(); // Focus input on open
                    }
                });

                closeChatbot.addEventListener('click', () => {
                    chatbotPanel.style.display = 'none';
                });

                sendMessage.addEventListener('click', handleSendMessage);

                // Allow sending with Enter, but allow Shift+Enter for newline
                chatbotInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault(); // Prevent default form submission/newline
                        handleSendMessage();
                    }
                });

                // --- Function to add a message bubble to the chat UI ---
                function addMessageToChat(role, text, isStreaming = false) {
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('mb-4');

                    const bubbleDiv = document.createElement('div');
                    bubbleDiv.classList.add('rounded-lg', 'p-3', 'inline-block');

                    if (role === 'user') {
                        // Styles handled by CSS now based on bubble class
                        bubbleDiv.classList.add('bg-primary', 'text-white');
                    } else { // assistant (or model)
                        bubbleDiv.classList.add('bg-gray-200', 'text-gray-800');
                        if (isStreaming) {
                            bubbleDiv.classList.add('streaming'); // Mark for updates
                            text = 'Đang trả lời...'; // Initial placeholder
                            currentBotMessageElement = bubbleDiv; // Store reference
                            currentBotFullText = ''; // Reset accumulator
                        }
                    }

                    const p = document.createElement('p');
                    p.innerHTML = text.replace(/\n/g, '<br>'); // Render newlines correctly
                    bubbleDiv.appendChild(p);
                    messageDiv.appendChild(bubbleDiv);
                    chatbotMessages.appendChild(messageDiv);

                    // Scroll to the bottom
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                }

                // --- Function to update the streaming bot message ---
                function updateStreamingMessage(chunk) {
                    if (currentBotMessageElement) {
                         if (currentBotFullText === '') { 
                              currentBotMessageElement.querySelector('p').innerHTML = ''; 
                         }
                         currentBotFullText += chunk;
                        
                         currentBotMessageElement.querySelector('p').innerHTML = currentBotFullText.replace(/\n/g, '<br>');
                         chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    }
                }

                
                 function finalizeStreamingMessage() {
                     if (currentBotMessageElement) {
                         currentBotMessageElement.classList.remove('streaming');
                         
                         if (currentBotFullText.trim() !== '') {
                              chatHistory.push({ role: 'assistant', content: currentBotFullText });
                         }
                         currentBotMessageElement = null;
                         currentBotFullText = ''; // Clear for next message
                         chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                     }
                 }

          
                 async function handleSendMessage() {
                     if (GROQ_API_KEY === 'YOUR_GROQ_API_KEY') {
                          addMessageToChat('assistant', '<strong class="text-red-600">Lỗi: Vui lòng thay thế \'YOUR_GROQ_API_KEY\' bằng API Key thật của bạn trong mã nguồn.</strong>');
                          return;
                     }

                     const message = chatbotInput.value.trim();
                     if (message === '') return;

                   
                     addMessageToChat('user', message);

                     chatHistory.push({ role: 'user', content: message });

                     chatbotInput.value = ''; 
                     autoResizeTextarea.call(chatbotInput); 
                     sendMessage.disabled = true; 
                     chatbotInput.disabled = true;

                    
                     addMessageToChat('assistant', '', true);

                     try {

                         const response = await fetch(GROQ_API_URL, {
                             method: 'POST',
                             headers: {
                                 'Content-Type': 'application/json',
                                 'Authorization': `Bearer ${GROQ_API_KEY}` 
                             },
                             body: JSON.stringify({
                                 messages: chatHistory, 
                                 model: GROQ_MODEL_NAME,
                                 temperature: 1,
                                 max_completion_tokens: 1024,
                                 top_p: 1,
                                 stream: true, 
                                 stop: null
                             })
                         });

                         if (!response.ok) {
                           
                             const errorBody = await response.text().catch(() => `Status: ${response.status}`);
                             console.error('API Error Response:', errorBody);
                             throw new Error(`API request failed: ${response.status} ${response.statusText || ''}. Body: ${errorBody.substring(0, 200)}...`); // Limit body log
                         }

                         if (!response.body) {
                             throw new Error("Không nhận được nội dung phản hồi từ API.");
                         }

                       
                         const reader = response.body.pipeThrough(new TextDecoderStream()).getReader();
                         let buffer = '';

                         while (true) {
                             const { value, done } = await reader.read();
                             if (done) {
                                 console.log('Stream finished.');
                                 break; 
                             }

                             buffer += value;

                             let boundary = buffer.indexOf('\n\n');
                             while (boundary !== -1) {
                                 const line = buffer.substring(0, boundary).trim();
                                 buffer = buffer.substring(boundary + 2); 

                                 if (line.startsWith('data:')) {
                                     const jsonData = line.substring(5).trim(); 
                                     if (jsonData === '[DONE]') {
                                       
                                     } else {
                                         try {
                                             const data = JSON.parse(jsonData);
                                           
                                             const chunkContent = data.choices?.[0]?.delta?.content;
                                             if (chunkContent) {
                                                 updateStreamingMessage(chunkContent);
                                             }
                                            
                                         } catch (parseError) {
                                             console.error('Lỗi phân tích JSON từ stream:', parseError, 'Data:', jsonData);
                                            
                                         }
                                     }
                                 }
                                 boundary = buffer.indexOf('\n\n');
                             }
                         }
                         
                          if (buffer.length > 0) {
                              console.warn('Remaining buffer after stream end:', buffer);
                               
                          }


                     } catch (error) {
                         console.error('Lỗi khi gọi Groq API:', error);
                         // Display error in the chat
                         if (currentBotMessageElement) {
                              currentBotMessageElement.querySelector('p').innerHTML = `<strong class="text-red-600">Xin lỗi, đã có lỗi xảy ra khi kết nối tới trợ lý ảo. Vui lòng thử lại sau. (Chi tiết: ${error.message})</strong>`;
                              currentBotMessageElement.classList.remove('streaming');
                         } else {
                              addMessageToChat('assistant', `<strong class="text-red-600">Xin lỗi, đã có lỗi xảy ra khi kết nối tới trợ lý ảo. Vui lòng thử lại sau. (Chi tiết: ${error.message})</strong>`);
                         }

                     } finally {
                       
                         finalizeStreamingMessage(); 
                         sendMessage.disabled = false;
                         chatbotInput.disabled = false;
                         chatbotInput.focus(); // Focus back on input
                         console.log("Updated History:", chatHistory);
                     }
                 }

             } 

        }); 
    </script>
</body>
</html>

